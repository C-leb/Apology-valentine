<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OPEN IT â¤ï¸</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #1a001a, #330033);
    font-family: 'Segoe UI', sans-serif;
    color: white;
    text-align: center;
    overflow-x: hidden;
}

section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

h1 { font-size: 22px; }

button {
    padding: 14px 28px;
    font-size: 16px;
    border: none;
    border-radius: 40px;
    cursor: pointer;
    margin: 12px;
    width: 80%;
    max-width: 280px;
}

#yesBtn { background: #ff4da6; color: white; }
#noBtn { background: white; color: black; position: absolute; }

.gifts {
    display: none;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}

.gift {
    width: 110px;
    height: 110px;
    background: #ff66cc;
    border-radius: 20px;
    font-size: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

#messageSection {
    display: none;
    font-size: 18px;
    max-width: 90%;
    white-space: pre-line;
}

#idiotBtn { display: none; background: white; color: black; }

#idiotImage { display: none; margin-top: 20px; }

canvas {
    position: fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>

<body>

<!-- ğŸµ MUSIC FILE -->
<audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<canvas id="confetti"></canvas>

<section id="apologySection">
    <h1 id="question">
        I know I'm lateâ€¦ I hadnâ€™t finished it yet.<br><br>
        Will you forgive me?
    </h1>

    <button id="yesBtn">YES â¤ï¸</button>
    <button id="noBtn">NO ğŸ˜­</button>
</section>

<section id="giftSection" class="gifts">
    <h2>Here are your gifts ğŸ</h2>

    <!-- ğŸŒ¸ FLOWERS -->
    <div class="gift" onclick="openGift(this, 'flowers')">ğŸ</div>

    <!-- ğŸ§¸ TEDDY -->
    <div class="gift" onclick="openGift(this, 'teddy')">ğŸ</div>

    <!-- ğŸ‘¶ BABY -->
    <div class="gift" onclick="openGift(this, 'baby')">ğŸ</div>

</section>

<section id="messageSection">
    <div id="typedText"></div>

    <button id="idiotBtn">Click to see that idiot ğŸ¥º</button>

    <!-- ğŸ“¸ YOUR PICTURE -->
    <div id="idiotImage">
        <img src="idiot.jpg" width="220">
    </div>

</section>

<script>
let noBtn = document.getElementById("noBtn");
let question = document.getElementById("question");
let music = document.getElementById("bgMusic");

noBtn.addEventListener("click", function(){
    let x = Math.random() * (window.innerWidth - 150);
    let y = Math.random() * (window.innerHeight - 150);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";

    let phrases = [
        "Nooo donâ€™t do that ğŸ˜­",
        "Please be nice ğŸ¥º",
        "This button is scared now ğŸ˜­",
        "You canâ€™t catch me ğŸ˜…"
    ];

    question.innerHTML = phrases[Math.floor(Math.random()*phrases.length)];
});

document.getElementById("yesBtn").addEventListener("click", function(){
    music.play(); // ğŸµ music starts after YES
    startConfetti();

    document.getElementById("apologySection").innerHTML =
        "<h1 style='font-size:28px;'>YESSSSSSHHHH!!! ğŸ‰</h1>";

    setTimeout(()=>{
        document.getElementById("apologySection").style.display="none";
        document.getElementById("giftSection").style.display="flex";
    },2000);
});

let opened = 0;

function openGift(el, type){
    if(el.innerHTML !== "ğŸ") return;

    if(type === "flowers"){
        el.innerHTML = "<img src='flowers.jpg' width='100'>";
    }

    if(type === "teddy"){
        el.innerHTML = "<img src='teddy.jpg' width='100'>";
    }

    if(type === "baby"){
        el.innerHTML = "<img src='baby.jpg' width='100'>";
    }

    opened++;

    if(opened === 3){
        document.getElementById("giftSection").style.display="none";
        document.getElementById("messageSection").style.display="block";
        typeMessage();
    }
}

function typeMessage(){
let text = `Maya youâ€™ve been my friend,
Bestfriend,
and now the Love of my life.

I really hope this works out.
I really do.

I am not going to use this as an escape but plzz don't be mad at Caleb for long ğŸ¥º

It took sometime to make.
I was held up yesterday.
I am sorry.

Plus ooh I forgot...
No excuses.

DON'T BE MAD FOR SOO LONG.

LOVE CALEB â¤ï¸`;

let i=0;
function typing(){
if(i<text.length){
document.getElementById("typedText").innerHTML += text.charAt(i);
i++;
setTimeout(typing,40);
}else{
document.getElementById("idiotBtn").style.display="block";
}
}
typing();
}

document.getElementById("idiotBtn").onclick=function(){
document.getElementById("idiotImage").style.display="block";
};

/* CONFETTI */
let canvas=document.getElementById("confetti");
let ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let pieces=[];
for(let i=0;i<150;i++){
pieces.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
r:Math.random()*6+2
});
}

function startConfetti(){
setInterval(draw,20);
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="pink";
for(let i=0;i<pieces.length;i++){
let p=pieces[i];
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fill();
p.y+=3;
if(p.y>canvas.height){
p.y=0;
}
}
}
</script>

</body>
</html>
